

# Overview of `autolysis.py`

This script is designed to analyze a CSV dataset and generate a detailed **README.md** report, including visualizations and insights. It uses **Python**, **Pandas**, **Seaborn**, and **GPT-4o Mini** for analysis and storytelling.

---

## Key Features

1. **Command-Line Interface**:
   - The script accepts the dataset file path as a command-line argument.
   - Usage:  
     ```bash
     uv run autolysis.py dataset.csv
     ```

2. **Data Analysis**:
   - **Summary Statistics**: Provides a statistical summary of the dataset.
   - **Correlation Analysis**: Generates a heatmap of correlations between numeric columns.
   - **Scatterplot Visualization**: Plots the relationship between the first two numeric columns.

3. **Insights from LLM**:
   - Sends a sample of the dataset (50 rows) to the **GPT-4o Mini API** for storytelling:
     - Describes the dataset as a story (structure, purpose, and context).
     - Summarizes the analysis performed.
     - Highlights key insights.
     - Discusses actionable implications of findings.

4. **Report Generation**:
   - Creates a `README.md` file containing:
     - Summary statistics in markdown format.
     - Insights and storytelling generated by the LLM.
     - Embedded visualizations (e.g., correlation heatmap, scatterplots).

5. **Encoding Handling**:
   - Supports both `UTF-8` and `ISO-8859-1` encoded datasets to handle a wide range of CSV files.

---

## File Outputs

- **`README.md`**:
  - Contains the complete report, including:
    - Dataset statistics
    - LLM-generated insights and storytelling
    - Visualizations embedded as markdown images.

- **Visualization Images**:
  - `correlation_heatmap.png`: Correlation heatmap of numeric columns.
  - `scatterplot.png`: Scatterplot of the first two numeric columns.

---

## Key Functions

### 1. **`send_request_to_llm(prompt)`**
   - Sends a prompt to GPT-4o Mini via HTTP and retrieves the response.
   - Utilizes the API key for authentication.

### 2. **`get_sample_analysis(data)`**
   - Sends a sample of the dataset (50 rows) to the LLM for storytelling.
   - Asks the LLM to describe the dataset, summarize the analysis, and provide insights.

### 3. **`perform_analysis(data, output_dir)`**
   - Performs data analysis:
     - Calculates summary statistics.
     - Generates visualizations (correlation heatmap, scatterplots).
   - Returns the summary and chart file paths.

### 4. **`write_readme(summary, charts, llm_insights, output_dir)`**
   - Generates the `README.md` report:
     - Embeds the dataset summary.
     - Includes insights from the LLM.
     - Adds visualizations as markdown images.

### 5. **`main()`**
   - Parses command-line arguments to get the dataset path.
   - Handles encoding issues while loading the CSV file.
   - Performs the analysis and generates the report.

---

## Example `README.md`

```markdown
# Dataset Analysis Report

## Summary Statistics
| Column         | Count  | Mean  | Std Dev | Min   | 25%   | 50%   | 75%   | Max   |
|----------------|--------|-------|---------|-------|-------|-------|-------|-------|
| feature1       | 100.0  | 50.5  | 29.0    | 1.0   | 25.0  | 50.0  | 75.0  | 100.0 |
| feature2       | 100.0  | 0.56  | 0.14    | 0.12  | 0.45  | 0.55  | 0.66  | 0.95  |

## Insights from LLM
1. **Dataset Description**:  
   This dataset contains 100 rows and 2 columns. It represents a hypothetical scenario where feature1 is a continuous variable, and feature2 is a normalized metric.

2. **Key Insights**:
   - Strong correlation between feature1 and feature2.
   - Feature1 exhibits a normal distribution, while feature2 is skewed.

3. **Implications**:
   - Leverage the correlation to predict feature2 based on feature1 for efficiency gains.
   - Investigate outliers in feature2 for potential anomalies.

## Visualizations

### correlation_heatmap.png
![Visualization](correlation_heatmap.png)

### scatterplot.png
![Visualization](scatterplot.png)
```

---

## How to Run the Script

1. Save the script as `autolysis.py`.
2. Place your CSV file in the same directory or provide the full path.
3. Run the script:
   ```bash
   uv run autolysis.py dataset.csv
   ```
4. Review the generated `README.md` and visualization files in the current directory.

---

